(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{357:function(t,e,n){"use strict";var r={},o=n(60),component=Object(o.a)(r,(function(){this._self._c;return this._m(0)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"left-panel"},[e("div",{staticClass:"right-display"},[e("div",{staticClass:"display-banner"}),t._v(" "),e("div",{staticClass:"each-display"},[e("div",{staticClass:"each-display-img"},[e("img",{staticClass:"image-12",attrs:{src:"https://uploads-ssl.webflow.com/62dec850062ac34180b54f5c/62e6bfc0559876b28d0defec_admin.png",loading:"lazy",alt:""}})]),t._v(" "),e("a",{staticClass:"link-4",attrs:{href:"#"}},[t._v("Contact us for your express visa processing")])]),t._v(" "),e("div",{staticClass:"each-display"},[e("div",{staticClass:"each-display-img"},[e("img",{staticClass:"image-12",attrs:{src:"https://uploads-ssl.webflow.com/62dec850062ac34180b54f5c/62e6bfc0559876b28d0defec_admin.png",loading:"lazy",alt:""}})]),t._v(" "),e("a",{staticClass:"link-4",attrs:{href:"#"}},[t._v("Contact us for your express visa processing")])]),t._v(" "),e("div",{staticClass:"each-display"},[e("div",{staticClass:"each-display-img"},[e("img",{staticClass:"image-12",attrs:{src:"https://uploads-ssl.webflow.com/62dec850062ac34180b54f5c/62e6bfc0559876b28d0defec_admin.png",loading:"lazy",alt:""}})]),t._v(" "),e("a",{staticClass:"link-4",attrs:{href:"#"}},[t._v("Contact us for your express visa processing")])])]),t._v(" "),e("a",{staticClass:"link-block-4 w-inline-block",attrs:{href:"#"}},[e("img",{staticClass:"image-10",attrs:{src:"https://uploads-ssl.webflow.com/62dec850062ac34180b54f5c/6367871d321d972e093be9e6_hotel-logo.svg",loading:"lazy",alt:""}})]),t._v(" "),e("div",{staticClass:"right-panel-foot"},[e("div",{staticClass:"each-foot-holder"},[e("img",{staticClass:"image-11",attrs:{src:"https://uploads-ssl.webflow.com/62dec850062ac34180b54f5c/636789870001034d3df11405_power-off-line-icon%202.svg",loading:"lazy",alt:""}}),t._v(" "),e("div",{staticClass:"text-block-7"},[t._v("Logout")])]),t._v(" "),e("div",{staticClass:"each-foot-holder"},[e("img",{staticClass:"image-11",attrs:{src:"https://uploads-ssl.webflow.com/62dec850062ac34180b54f5c/6367a4d826b9afb1664c47bb_Help.svg",loading:"lazy",alt:""}}),t._v(" "),e("div",{staticClass:"text-block-7"},[t._v("Help")])])])])}],!1,null,null,null);e.a=component.exports},358:function(t,e,n){var content=n(375);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(159).default)("5ca4ec2a",content,!0,{sourceMap:!1})},359:function(t,e,n){var content=n(377);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(159).default)("82485924",content,!0,{sourceMap:!1})},371:function(t,e,n){"use strict";var r=n(3),o=n(372).start;r({target:"String",proto:!0,forced:n(373)},{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},372:function(t,e,n){var r=n(5),o=n(64),c=n(14),l=n(226),h=n(26),f=r(l),d=r("".slice),m=Math.ceil,v=function(t){return function(e,n,r){var l,v,_=c(h(e)),C=o(n),y=_.length,k=void 0===r?" ":c(r);return C<=y||""==k?_:((v=f(k,m((l=C-y)/k.length))).length>l&&(v=d(v,0,l)),t?_+v:v+_)}};t.exports={start:v(!1),end:v(!0)}},373:function(t,e,n){var r=n(47);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},374:function(t,e,n){"use strict";n(358)},375:function(t,e,n){var r=n(158)(!1);r.push([t.i,".chat-return.end{margin-left:auto}.chat-return.end img.return-icon{width:17px}.chat-body{position:relative}.chat-prompt{display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5);position:sticky;top:0;left:0;width:100%;height:100%;z-index:99;transform:scale(0);transition:all .3s}.chat-prompt.active{transform:scale(1)}.prompt-box{background:#fff;padding:20px;flex-direction:column;border-radius:3px}.prompt-box,.prompt-box>div{display:flex;justify-content:center}.custom-btn.chat{color:#fff;margin:0 10px}.holder{width:100%}.chat-header{position:relative}",""]),t.exports=r},376:function(t,e,n){"use strict";n(359)},377:function(t,e,n){var r=n(158)(!1);r.push([t.i,".select-holder.rooms{width:150px;margin:5px auto}",""]),t.exports=r},390:function(t,e,n){"use strict";n(32),n(36),n(83),n(62),n(80);var r={data:function(){return{message:"",sentMessages:[]}},computed:{userInfo:function(){return this.$store.getters.getUserInfo},checkScroll:function(){return this.$store.state.chat.scrollDown},chatMessages:function(){return this.$store.state.chat.chatMessages},showPrompt:function(){return this.$store.state.chat.showPrompt},rooms:function(){return this.$store.state.chat.rooms},services:function(){return this.$store.state.chat.services},chatState:function(){return this.$store.state.chat.chatState},currentChatPartner:function(){return this.$store.state.chat.currentChatPartner},activeRoom:function(){return this.$store.state.chat.activeRoom},routeName:function(){return this.$route.name}},methods:{formatAMPM:function(t){var e=t.getHours(),n=t.getMinutes(),r=e>=12?"pm":"am";return(e=(e%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+r},hideChat:function(){this.$store.commit("chat/HIDE_CHAT")},showPromptBox:function(){this.$store.commit("chat/SHOW_PROMPT")},toggleShowPrompt:function(){this.$store.commit("chat/TOGGLE_PROMPT")},endChat:function(){this.socket.emit("endChat",this.chatMessages._id),this.hideChat()},cancelPrompt:function(){this.$store.commit("chat/HIDE_PROMPT")},processMessage:function(){var t=new Date,time=this.formatAMPM(t),e="".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()),data={members:"User"==this.userInfo.status?[this.userInfo.activeRoom,this.currentChatPartner]:[this.activeRoom,this.userInfo.staffType],date:e,messages:{username:this.userInfo.username,time:time,message:this.message}};this.sendMessage(data)},sendMessage:function(data){this.socket.emit("sendMessage",data),this.message=""},scrollDown:function(){var t=document.querySelector(".chat-body");null!=t&&(t.scrollTop=t.scrollHeight)},refreshRooms:function(){"Staff"==this.userInfo.status&&this.socket.emit("getRooms",this.userInfo.staffType),"User"==this.userInfo.status&&this.socket.emit("getOffices",this.userInfo.activeRoom)}},mounted:function(){var t=this;this.socket=this.$nuxtSocket({}),this.scrollDown(),this.$watch("checkScroll",(function(a,b){t.scrollDown()})),this.socket.on("roomMessages",(function(e,n){t.refreshRooms(),t.scrollDown()}));var e=function(){document.getElementById("messageSound").innerHTML="<audio autoplay=\"autoplay\"><source src='/sound/sweet.wav' type='audio/mpeg'></audio>"},n=this.userInfo;this.socket.on("receivedMessage",(function(r,o){"Staff"==n.status?n.staffType==r.members[1]&&t.activeRoom==r.members[0]&&t.$store.commit("chat/ADD_MESSAGE",r):n.activeRoom==r.members[0]&&t.currentChatPartner==r.members[1]&&t.$store.commit("chat/ADD_MESSAGE",r),setTimeout((function(){var t=document.querySelector(".chat-body");null!=t&&(t.scrollTop=t.scrollHeight)}),5),"Staff"==n.status?n.username!=r.messages.username&&r.members.includes(n.staffType)&&(e(),t.refreshRooms()):"User"==n.status&&n.username!=r.messages.username&&r.members.includes(n.activeRoom)&&(e(),t.refreshRooms())})),this.socket.on("receivedAutoMessage",(function(t,r){n.activeRoom!=t.members[0]&&n.staffType!=t.members[1]||e()})),this.socket.on("chatEnded",(function(e,r){t.refreshRooms();var o=function(){t.$store.commit("chat/RESET_MESSAGE",e),t.hideChat()};"Staff"==n.status?n.staffType==e.members[1]&&t.activeRoom==e.members[0]&&o():n.activeRoom==e.members[0]&&t.currentChatPartner==e.members[1]&&o()}))}},o=(n(374),n(60)),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return t.chatState?e("div",{staticClass:"each-panel full chat"},[e("div",{staticClass:"chat-header"},[e("div",{staticClass:"chat-return",on:{click:t.hideChat}},[e("img",{staticClass:"return-icon",attrs:{src:"/img/back-icon.svg",loading:"lazy",alt:""}})]),t._v(" "),"admin-order"==t.routeName?e("h1",{staticClass:"chat-title"},[t._v("\n      Chat with "+t._s(t.currentChatPartner)+"\n    ")]):"admin-sales"==t.routeName?e("h1",{staticClass:"chat-title"},[t._v("\n      Chat with Room "+t._s(t.activeRoom)+",\n    ")]):t._e(),t._v(" "),t.chatMessages?e("div",{staticClass:"chat-return end",on:{click:t.toggleShowPrompt}},[e("img",{staticClass:"return-icon",attrs:{src:"/img/close.svg",loading:"lazy",alt:""}})]):t._e()]),t._v(" "),e("div",{staticClass:"chat-body"},[e("div",{staticClass:"chat-prompt",class:{active:t.showPrompt}},[e("div",{staticClass:"prompt-box"},[e("h2",{staticClass:"panel-head"},[t._v("End This Chat")]),t._v(" "),e("div",[e("button",{staticClass:"custom-btn chat",on:{click:t.endChat}},[t._v("Yes")]),t._v(" "),e("button",{staticClass:"custom-btn chat",on:{click:t.cancelPrompt}},[t._v("No")])])])]),t._v(" "),t.chatMessages?e("div",t._l(t.chatMessages.messages,(function(n,i){return e("div",{key:i,staticClass:"each-chat-day"},[e("div",{staticClass:"custom-btn date"},[t._v(t._s(n.date))]),t._v(" "),e("ul",{staticClass:"each-chat-list",attrs:{role:"list"}},t._l(n.dailyMessages,(function(n,r){return e("li",{key:r,staticClass:"chat-msg",class:{first:n.username==t.userInfo.username,second:n.username!=t.userInfo.username}},[e("div",{staticClass:"chat-msg-main",class:{light:n.username==t.userInfo.username}},[t._v("\n              "+t._s(n.message)+"\n            ")]),t._v(" "),e("div",{staticClass:"chat-time"},[t._v(t._s(n.time))])])})),0)])})),0):t._e()]),t._v(" "),e("div",{staticClass:"chat-footer w-form"},[e("form",{staticClass:"chat-form",attrs:{method:"get"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"chat-input w-input",attrs:{placeholder:"Enter message",maxlength:"5000",required:""},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),e("img",{staticClass:"send-msg",attrs:{src:"/img/white-send-icon.svg",loading:"lazy",alt:""},on:{click:t.processMessage}})])])]):t._e()}),[],!1,null,null,null);e.a=component.exports},391:function(t,e,n){"use strict";var r=n(0),o=(n(11),n(17),n(37),n(62),n(32),n(36),{data:function(){return{rooms:"",showRooms:!1,defaultRoom:"Select Room",roomsArray:[],hotel:"",showOffice:!1,defaultOffice:"Select Office",officeArray:[],salesPoints:[]}},computed:{userInfo:function(){return this.$store.getters.getUserInfo},offices:function(){var t=[],e=["CEO","Manager","User"];return this.hotel&&this.hotel.salesPoints.forEach((function(n){e.includes(n)||t.push(n)})),t},bookedRooms:function(){var t=[];return this.roomsArray.forEach((function(e){e.isBooked&&t.push(e)})),t},chatMessages:function(){return this.$store.state.chat.chatMessages},chatState:function(){return this.$store.state.chat.chatState},currentRoom:function(){return this.$store.state.chat.currentRoom},currentStaff:function(){return this.$store.state.chat.currentStaff},routeName:function(){return this.$route.name}},methods:{formatAMPM:function(t){var e=t.getHours(),n=t.getMinutes(),r=e>=12?"pm":"am";return(e=(e%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+r},showChat:function(){this.$store.commit("chat/SHOW_CHAT")},hideChat:function(){this.$store.commit("chat/HIDE_CHAT")},selectChatPartner:function(t){this.$store.commit("chat/SELECT_CHAT_PARTNER",t)},selectRoom:function(t){this.$store.commit("chat/SELECT_ROOM",t)},getOrderMessages:function(data){var t,e;this.$store.commit("chat/HIDE_PROMPT"),"User"==this.userInfo.status?this.selectChatPartner(data):this.selectRoom(data);var n=this.userInfo.status;"User"==n?(t=this.userInfo.activeRoom,e=data):"Staff"==n&&(t=data,e=this.userInfo.staffType);var r=[t,e],o=this.userInfo.username;this.socket.emit("getOrderMessages",{members:r,user:o}),this.showChat()},processMessage:function(){var t,e=new Date,time=this.formatAMPM(e),data={date:"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear()),members:"User"==this.userInfo.status?[t=this.userInfo.username,this.currentRoom]:[t=this.userInfo.staffType,this.currentStaff],messages:{username:t,time:time,message:this.message}};this.sendMessage(data)},sendMessage:function(data){this.$store.dispatch("chat/SEND_MESSAGE",this.userInfo),this.socket.emit("sendMessage",data),this.message=""},getMessage:function(){var t=this,e=document.querySelector(".chat-body");this.socket.emit("getMessage",{id:"abc123"},(function(n){t.messageRxd=n,e.scrollTop=e.scrollHeight}))},scrollDown:function(){var t=document.querySelector(".chat-body");null!=t&&(t.scrollTop=t.scrollHeight)},getRooms:function(){"Staff"==this.userInfo.status&&this.socket.emit("getRooms",this.userInfo.staffType)},getOffices:function(){"User"==this.userInfo.status&&this.socket.emit("getOffices",this.userInfo.activeRoom)},filterRoom:function(data){this.getOrderMessages(data),this.showRooms=!this.showRooms,this.scrollDown()},filterOffice:function(data){this.getOrderMessages(data),this.showOffice=!this.showOffice,this.$store.commit("chat/SCROLL_DOWN")},fetchRooms:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/rooms/?isBooked=true");case 3:n=e.sent,t.roomsArray=n.data.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getHotel:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/hotel");case 3:n=e.sent,t.hotel=n.data.data[0],e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){var t=this;this.fetchRooms(),this.getHotel(),this.socket=this.$nuxtSocket({});var e=this.userInfo;this.socket.on("roomMessages",(function(n,r){n.switchingUser==e.username&&(t.$store.commit("chat/SET_MESSAGES",n),t.scrollDown())})),this.socket.on("unreadRooms",(function(e,n){t.rooms=e})),this.socket.on("unreadOffices",(function(e,n){t.salesPoints=e})),this.getRooms(),this.getOffices()}}),c=(n(376),n(60)),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"each-panel full"},[e("div",{attrs:{id:"messageSound"}}),t._v(" "),"User"==t.userInfo.status?e("h1",{staticClass:"panel-head"},[t._v("Service Orders")]):e("h1",{staticClass:"panel-head"},[t._v("Room Orders")]),t._v(" "),"User"==t.userInfo.status?e("div",{staticClass:"room-tags"},t._l(t.salesPoints,(function(n){return e("div",{key:n._id,staticClass:"custom-btn gray",on:{click:function(e){return t.getOrderMessages(n.members[1])}}},[e("div",[t._v(t._s(n.members[1]))]),t._v(" "),e("div",{staticClass:"notification room"})])})),0):"Restaurant"==t.userInfo.staffType||"Bar"==t.userInfo.staffType||"Reception"==t.userInfo.staffType?e("div",{staticClass:"room-tags"},[""!=t.rooms?e("div",t._l(t.rooms,(function(n){return e("div",{key:n._id,staticClass:"custom-btn gray",on:{click:function(e){return t.getOrderMessages(n.members[0])}}},[e("div",[t._v(t._s(n.members[0]))]),t._v(" "),e("div",{staticClass:"notification room"})])})),0):t._e()]):t._e(),t._v(" "),"Staff"==t.userInfo.status?e("div",{staticClass:"select-holder rooms"},[e("img",{staticClass:"caret-down",attrs:{src:"/img/white-caret-icon.svg",loading:"lazy",alt:""},on:{click:function(e){t.showRooms=!t.showRooms}}}),t._v(" "),e("h1",{staticClass:"div-block-140 colored",on:{click:function(e){t.showRooms=!t.showRooms}}},[t._v("\n      "+t._s(t.defaultRoom)+"\n    ")]),t._v(" "),e("ul",{staticClass:"search-result-list select",class:{hide:!t.showRooms},staticStyle:{"z-index":"99"},attrs:{role:"list"}},t._l(t.bookedRooms,(function(n,r){return e("li",{key:r,staticClass:"search-list",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.filterRoom(n.roomNumber)}}},[e("div",[t._v(t._s(n.roomNumber))])])})),0)]):e("div",{staticClass:"select-holder rooms"},[e("img",{staticClass:"caret-down",attrs:{src:"/img/white-caret-icon.svg",loading:"lazy",alt:""},on:{click:function(e){t.showOffice=!t.showOffice}}}),t._v(" "),e("h1",{staticClass:"div-block-140 colored",on:{click:function(e){t.showOffice=!t.showOffice}}},[t._v("\n      "+t._s(t.defaultOffice)+"\n    ")]),t._v(" "),t.offices.length>0?e("ul",{staticClass:"search-result-list select",class:{hide:!t.showOffice},staticStyle:{"z-index":"99"},attrs:{role:"list"}},t._l(t.offices,(function(n,r){return e("li",{key:r,staticClass:"search-list",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.filterOffice(n)}}},[e("div",[t._v(t._s(n))])])})),0):t._e()])])}),[],!1,null,null,null);e.a=component.exports},443:function(t,e,n){var content=n(567);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(159).default)("685b7798",content,!0,{sourceMap:!1})},444:function(t,e,n){var content=n(569);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(159).default)("075657e1",content,!0,{sourceMap:!1})},566:function(t,e,n){"use strict";n(443)},567:function(t,e,n){var r=n(158)(!1);r.push([t.i,".div-block-140 input{width:auto;background:transparent;border:0;outline:none;max-width:130px}.table-light input{border:none;outline:none}div.status{padding:5px 10px;border-radius:3px;cursor:pointer;background:#feda77;color:#666;display:inline}div.status.success{background:#56e025;color:#fff}.checkin.btn-holder{width:100%}.checkin.set{align-self:center;min-width:150px}.counter{margin-left:auto}",""]),t.exports=r},568:function(t,e,n){"use strict";n(444)},569:function(t,e,n){var r=n(158)(!1);r.push([t.i,".each-panel.no-pad{padding:0;position:relative;box-shadow:none;background:transparent}.each-panel.chat{width:100%}",""]),t.exports=r},592:function(t,e,n){"use strict";n.r(e);var r=n(348),o=n(391),c=n(390),l=n(349),h=n(350),f=(n(34),n(54),n(0)),d=(n(11),n(36),n(24),n(61),n(17),n(100),n(371),n(32),n(368),n(340)),m=n(393),v={data:function(){return{sales:[],routeName:"",sort:"status",limit:4,currentPage:1,field:"All Sales",saleLength:"",pages:function(){for(var t=[],e=Math.ceil(this.saleLength/this.limit),i=0;i<e;i++)t.push("i");return t},date:"",paid:"",post:"",units:1,quantity:1,validTem:!1}},methods:{showOverlay:function(t,e,n,r){this.$store.commit("SHOW_OVERLAY",{action:t,id:e,message:n,item:r})},formatDate:function(t){var e=new Date(t);return"".concat(e.getDate(),"/").concat(e.getMonth(),"/").concat(e.getFullYear())},paginate:function(t){this.currentPage=t,this.getAllSales()},formatAMPM:function(t){var e=t.getHours(),n=t.getMinutes(),r=e>=12?"pm":"am";return(e=(e%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+r},checkNegativeNumber:function(t){Math.abs(t)},formatMoney:function(t){return null==t||""==t?"-N0.00":t<0?"-N".concat(Math.abs(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):"+N"+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},setDate:function(){var t=new Date;this.date=t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,"0")+"-"+t.getDate().toString().padStart(2,"0")},checkRoute:function(){this.routeName=this.$route.name},checkDeleting:function(t,e){return!e.transaction||"Bar"!=t.staffType&&"Restaurant"!=t.staffType},checkCustomer:function(data){var t=Number(data);return isNaN(t)?data:"Room ".concat(data)},getDailySale:function(t){this.date=t,this.getAllSales()},createSalesForm:function(t){return{status:!t.status,id:t._id,username:this.user.username,salesPoint:this.user.salesPoint}},createTransactionForm:function(t){return{transaction:!t.transaction,id:t._id,username:this.user.username,salesPoint:this.user.salesPoint,customerId:t.customerId,userStatus:t.userStatus}},deleteAllSales:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.delete("/sales");case 3:t.getAllSales(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.callResponseMsg(e.t0.response.data.message,!0,!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},getAllSales:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,h,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user.staffType,r="Manager"==n||"Director"==n?"":"salesPoint=".concat(n),o=new Date(t.date),c="".concat(o.getDate(),"/").concat(o.getMonth(),"/").concat(o.getFullYear()),l="?sort=-time&limit=".concat(t.limit,"&page=").concat(t.currentPage,"&day=").concat(c,"&").concat(r,"&staffType=").concat(n),e.prev=5,e.next=8,t.$axios.get("/sales/".concat(l));case 8:return d=e.sent,t.sales=d.data.data,t.saleLength=d.data.resultLength,e.next=13,null==d||null===(h=d.data)||void 0===h?void 0:h.paid[0];case 13:return t.paid=e.sent,e.next=16,null==d||null===(f=d.data)||void 0===f?void 0:f.post[0];case 16:t.post=e.sent,e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(5),e.abrupt("return",e.t0.response.data.message);case 22:case"end":return e.stop()}}),e,null,[[5,19]])})))()},updateSale:function(t){var e=this;return Object(f.a)(regeneratorRuntime.mark((function n(){var form;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!=t.status||1!=t.transaction){n.next=2;break}return n.abrupt("return");case 2:if(1!=t.status||t.deliveredBy==e.user.username){n.next=4;break}return n.abrupt("return");case 4:form=e.createSalesForm(t),"Restaurant"!=e.user.staffType&&"Bar"!=e.user.staffType||e.socket.emit("updateSale",form);case 6:case"end":return n.stop()}}),n)})))()},updateTransaction:function(t){var e=this;return Object(f.a)(regeneratorRuntime.mark((function n(){var form;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!=t.status&&1!=t.transaction){n.next=2;break}return n.abrupt("return");case 2:form=e.createTransactionForm(t),"Restaurant"!=e.user.staffType&&"Bar"!=e.user.staffType||e.socket.emit("updateTransaction",form);case 4:case"end":return n.stop()}}),n)})))()},deleteSale:function(t){var e=this;return Object(f.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("kitchen/DELETE_SALE",t);case 2:200==(r=n.sent).status?e.getAllSales():e.callResponseMsg(r.response.data.message,!0,!0);case 4:case"end":return n.stop()}}),n)})))()}},computed:{user:function(){return this.$store.getters.getUserInfo}},mounted:function(){var t=this;this.checkRoute(),this.setDate(),this.getAllSales(),this.socket=this.$nuxtSocket({}),this.socket.on("createdOrder",(function(data,e){t.getAllSales()})),this.socket.on("updatedSale",(function(data,e){t.getAllSales()})),this.socket.on("updatedTransaction",(function(data,e){t.getAllSales()}))},components:{ConfirmAction:d.a,AdminItems:m.a}},_=(n(566),n(60)),C=Object(_.a)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"each-panel full no-pad"},[e("ConfirmAction",{on:{deleteSale:function(e){return t.deleteSale(e)}}}),t._v(" "),"Restaurant"==t.user.staffType||"Bar"==t.user.staffType||"Reception"==t.user.staffType?e("div",{staticClass:"each-panel full"},[e("AdminItems")],1):t._e(),t._v(" "),e("div",{staticClass:"each-panel full",staticStyle:{"margin-bottom":"0"}},[e("h1",{staticClass:"panel-head"},[t._v("Sales History")]),t._v(" "),e("div",{staticClass:"table-line left-align"},[e("div",{staticClass:"table-light"},[t._v("Result: "+t._s(t.saleLength))]),t._v(" "),e("div",{staticClass:"table-light"},[t._v("\n        Page "+t._s(t.currentPage)+" of "+t._s(t.pages().length)+"\n      ")]),t._v(" "),e("div",{staticClass:"table-light"},[t._v("\n        Date:\n        "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],attrs:{type:"date"},domProps:{value:t.date},on:{change:function(e){return t.getDailySale(t.date)},input:function(e){e.target.composing||(t.date=e.target.value)}}})]),t._v(" "),t.post?e("div",{staticClass:"table-light right-float"},[t._v("\n        Posted: "+t._s(t.formatMoney(t.post.amount))+"\n      ")]):t._e(),t._v(" "),t.paid?e("div",{staticClass:"table-light right-float"},[t._v("\n        Paid: "+t._s(t.formatMoney(t.paid.amount))+"\n      ")]):t._e()]),t._v(" "),e("div",{staticClass:"table-flow"},[e("table",[t._m(0),t._v(" "),e("tbody",t._l(t.sales,(function(n,i){return e("tr",{key:i},[e("td",[t._v(t._s(i+1))]),t._v(" "),e("td",t._l(n.description,(function(n,i){return e("div",{key:i},[t._v("\n                "+t._s(n)+"\n              ")])})),0),t._v(" "),e("td",[e("div",[t._v(t._s(t.checkCustomer(n.customer)))])]),t._v(" "),e("td",[t._v(t._s(t.formatMoney(n.price)))]),t._v(" "),e("td",[n.checkInCheckOut.length>0?e("div",["Reception"==n.salesPoint?e("div",[t._v("\n                  "+t._s(t.formatAMPM(new Date(n.time)))+", "),e("br"),t._v("\n\n                  Check in: "+t._s(t.formatDate(n.checkInCheckOut[0]))+",\n                  "),e("br"),t._v("Check out: "+t._s(t.formatDate(n.checkInCheckOut[1]))+"\n                ")]):t._e()]):e("div",[t._v(t._s(t.formatAMPM(new Date(n.time))))])]),t._v(" "),e("td",[n.status?e("div",{staticClass:"status",class:{success:n.status},on:{click:function(e){return t.updateSale(n)}}},[t._v("\n                Delivered\n              ")]):e("div",{staticClass:"status",on:{click:function(e){return t.updateSale(n)}}},[t._v("\n                Pending\n              ")])]),t._v(" "),e("td",[n.transaction?e("div",{staticClass:"status",class:{success:n.transaction},on:{click:function(e){return t.updateTransaction(n)}}},[t._v("\n                Paid\n              ")]):e("div",{staticClass:"status",on:{click:function(e){return t.updateTransaction(n)}}},[t._v("\n                Posted\n              ")])]),t._v(" "),t.checkDeleting(t.user,n)?e("td",[e("img",{attrs:{src:"/img/trash-bin-icon.svg",alt:""},on:{click:function(e){return t.showOverlay("delete",n._id,"Are you sure you want to delete this sale?","sale")}}})]):t._e()])})),0)])]),t._v(" "),e("div",{staticClass:"btn-holder"},[e("input",{staticClass:"custom-btn w-button",staticStyle:{"margin-right":"auto"},attrs:{type:"submit",value:"Delete All","data-wait":"Please wait..."},on:{click:t.deleteAllSales}})]),t._v(" "),e("div",{staticClass:"pagination"},[1!=t.currentPage?e("img",{staticClass:"pagination-arrow left",attrs:{src:"/img/left-nav.svg",loading:"lazy",alt:""},on:{click:function(e){return t.paginate(t.currentPage-1)}}}):t._e(),t._v(" "),e("ul",{staticClass:"page-list",attrs:{role:"list"}},t._l(t.pages(),(function(n,r){return e("li",{key:r,staticClass:"page-items",class:{active:t.currentPage==r+1},staticStyle:{cursor:"pointer"},on:{click:function(e){return t.paginate(r+1)}}},[e("div",[t._v(t._s(r+1))])])})),0),t._v(" "),t.currentPage<t.pages().length?e("img",{staticClass:"pagination-arrow",attrs:{src:"/img/left-nav.svg",loading:"lazy",alt:""},on:{click:function(e){return t.paginate(t.currentPage+1)}}}):t._e()])])],1)}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("td",[t._v("S/N")]),t._v(" "),e("td",[t._v("Description")]),t._v(" "),e("td",[t._v("Customer")]),t._v(" "),e("td",[t._v("Price")]),t._v(" "),e("td",[t._v("Time")]),t._v(" "),e("td",[t._v("Status")]),t._v(" "),e("td",[t._v("Transaction")]),t._v(" "),e("td",[t._v("Action")])])])}],!1,null,null,null).exports,y=n(351),k=n(357),w={components:{AdminFooter:l.a,AdminHeader:h.a,AdminNavigation:y.a,AdminChatNavigation:o.a,AdminChatBox:c.a,AdminCards:r.a,AdminSideNews:k.a,AdminKitchen:C},computed:{chatState:function(){return this.$store.state.chat.chatState},user:function(){return this.$store.getters.getUserInfo}},methods:{toggleChatState:function(){this.$store.commit("chat/SHOW_CHAT")}}},S=(n(568),Object(_.a)(w,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"sales"},[e("AdminHeader"),t._v(" "),e("div",{staticClass:"admin-content"},[e("AdminNavigation"),t._v(" "),e("div",{staticClass:"middle-content"},[e("AdminCards"),t._v(" "),e("div",{staticClass:"panel-holder"},["Restaurant"==t.user.staffType||"Bar"==t.user.staffType||"Reception"==t.user.staffType?e("AdminChatNavigation"):t._e(),t._v(" "),"Restaurant"==t.user.staffType||"Bar"==t.user.staffType||"Reception"==t.user.staffType?e("AdminChatBox"):t._e(),t._v(" "),e("AdminKitchen")],1)],1)],1),t._v(" "),e("AdminFooter")],1)}),[],!1,null,null,null));e.default=S.exports}}]);