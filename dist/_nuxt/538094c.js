(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{369:function(t,e,r){"use strict";var n=r(3),o=r(370).start;n({target:"String",proto:!0,forced:r(371)},{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},370:function(t,e,r){var n=r(5),o=r(65),c=r(14),l=r(227),d=r(27),m=n(l),f=n("".slice),v=Math.ceil,h=function(t){return function(e,r,n){var l,h,_=c(d(e)),C=o(r),w=_.length,P=void 0===n?" ":c(n);return C<=w||""==P?_:((h=m(P,v((l=C-w)/P.length))).length>l&&(h=f(h,0,l)),t?_+h:h+_)}};t.exports={start:h(!1),end:h(!0)}},371:function(t,e,r){var n=r(47);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},444:function(t,e,r){var content=r(573);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(160).default)("161a6360",content,!0,{sourceMap:!1})},572:function(t,e,r){"use strict";r(444)},573:function(t,e,r){var n=r(159)(!1);n.push([t.i,'.user-pix{position:relative;overflow:hidden}.user-pix img.profile-pic{-o-object-fit:cover;object-fit:cover;min-height:100%;min-width:100%}label.edit-pix{cursor:pointer;margin-top:auto;margin-bottom:0}.edit-pix input{height:.1px;width:.1px;opacity:0}.w-input[disabled]:not(.w-input-disabled),.w-input[readonly],.w-select[disabled]:not(.w-input-disabled),.w-select[readonly],fieldset[disabled]:not(.w-input-disabled) .w-input,fieldset[disabled]:not(.w-input-disabled) .w-select{background-color:transparent}.transaction{padding:20px}.transaction .table-light{font-size:16px;font-family:"Gilda Display, sans-serif"}',""]),t.exports=n},577:function(t,e,r){"use strict";r.r(e);r(36);var n=r(0),o=r(10),c=(r(11),r(25),r(62),r(17),r(100),r(38),r(39),r(356),r(225),r(353)),l=r(354),d=r(355),m=r(352),f=(r(24),{data:function(){return{user:"",roomHistory:[],currentPage:1,limit:4,sort:"day,-time",sortSign:"-",field:"All Items",roomLength:"",pages:function(){for(var t=[],e=Math.ceil(this.roomLength/this.limit),i=0;i<e;i++)t.push("i");return t},date:""}},methods:{formatDate:function(data){var t=new Date(data);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear())},formatAMPM:function(t){var e=t.getHours(),r=t.getMinutes(),n=e>=12?"pm":"am";return(e=(e%=12)||12)+":"+(r=r<10?"0"+r:r)+" "+n},formatMoney:function(t){return 0==t?"N0.00":"N"+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},setProfilePicture:function(t){var e=Object(o.a)(photo.files,1)[0];this.profilePicture=e,this.avatar=URL.createObjectURL(e),this.picture=this.avatar},updateUser:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var form,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return form=new FormData,r=t.user._id,form.append("profilePicture",t.profilePicture),e.next=5,t.$store.dispatch("UPDATE_USER",{id:r,form:form});case 5:e.sent&&t.setUser();case 7:case"end":return e.stop()}}),e)})))()},getUser:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$route.params.id,e.prev=1,e.next=4,t.$axios.get("/users/".concat(r));case 4:n=e.sent,t.user=n.data.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},getRoomHistory:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$route.params.id,n="?userId=".concat(r,"&limit=").concat(t.limit,"&page=").concat(t.currentPage),e.prev=2,e.next=5,t.$axios.get("/rooms/room-history/".concat(n));case 5:o=e.sent,t.roomHistory=o.data.data,t.roomLength=o.data.resultLength,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()}},computed:{getUserInfo:function(){return this.$store.getters.getUserInfo},URL:function(){return this.$store.state.API_URL}},mounted:function(){this.getRoomHistory(),this.getUser()}}),v=r(61),h=Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"transaction"},[t._m(0),t._v(" "),e("div",{staticClass:"table-flow"},[e("table",[t._m(1),t._v(" "),e("tbody",t._l(t.roomHistory,(function(r,i){return e("tr",{key:i},[e("td",{staticClass:"sn"},[t._v("\n            "+t._s(i+1+4*(t.currentPage-1))+"\n          ")]),t._v(" "),e("td",[t._v("Room "+t._s(r.number))]),t._v(" "),e("td",[t._v("\n            "+t._s(r.name)+"\n          ")]),t._v(" "),e("td",[t._v(t._s(t.formatDate(r.checkIn)))]),t._v(" "),e("td",[t._v(t._s(t.formatDate(r.checkOut)))]),t._v(" "),e("td",[t._v(t._s(t.formatMoney(r.price)))]),t._v(" "),e("td",[r.transaction?e("div",{staticClass:"status",class:{success:r.transaction}},[t._v("\n              Paid\n            ")]):e("div",{staticClass:"status"},[t._v("Posting")])])])})),0)])]),t._v(" "),e("div",{staticClass:"pagination"},[1!=t.currentPage?e("img",{staticClass:"pagination-arrow left",attrs:{src:"/img/left-nav.svg",loading:"lazy",alt:""},on:{click:function(e){return t.paginate(t.currentPage-1)}}}):t._e(),t._v(" "),e("ul",{staticClass:"page-list",attrs:{role:"list"}},t._l(t.pages(),(function(r,n){return e("li",{key:n,staticClass:"page-items",class:{active:t.currentPage==n+1},staticStyle:{cursor:"pointer"},on:{click:function(e){return t.paginate(n+1)}}},[e("div",[t._v(t._s(n+1))])])})),0),t._v(" "),t.currentPage<t.pages().length?e("img",{staticClass:"pagination-arrow",attrs:{src:"/img/left-nav.svg",loading:"lazy",alt:""},on:{click:function(e){return t.paginate(t.currentPage+1)}}}):t._e()])])}),[function(){var t=this._self._c;return t("div",{staticClass:"table-line left-align"},[t("div",{staticClass:"table-light"},[this._v("Room History:")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("td",[t._v("S/N")]),t._v(" "),e("td",[t._v("Room Number")]),t._v(" "),e("td",[t._v("Room Name")]),t._v(" "),e("td",[t._v("Checked In")]),t._v(" "),e("td",[t._v("Checked Out")]),t._v(" "),e("td",[t._v("Price")]),t._v(" "),e("td",[t._v("Transaction")])])])}],!1,null,null,null).exports,_=(r(34),r(55),r(369),{data:function(){return{sales:[],paid:"",post:"",sort:"status",limit:4,currentPage:1,field:"All Sales",saleLength:"",pages:function(){for(var t=[],e=Math.ceil(this.saleLength/this.limit),i=0;i<e;i++)t.push("i");return t},date:"",units:1,quantity:1,validTem:!1}},methods:{showOverlay:function(t,e,r,n){this.$store.commit("SHOW_OVERLAY",{action:t,id:e,message:r,item:n})},formatDate:function(t){var e=new Date(t);return"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear())},paginate:function(t){this.currentPage=t,this.getUserPurchases()},formatAMPM:function(t){var e=t.getHours(),r=t.getMinutes(),n=e>=12?"pm":"am";return(e=(e%=12)||12)+":"+(r=r<10?"0"+r:r)+" "+n},formatMoney:function(t){return"N"+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},setDate:function(){var t=new Date;this.date=t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,"0")+"-"+t.getDate().toString().padStart(2,"0")},getDailySale:function(t){this.date=t,this.getUserPurchases()},createSalesForm:function(t){return{status:!t.status,id:t._id,username:this.user.username,salesPoint:this.user.salesPoint}},getUserPurchases:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l,d,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$route.params.id,n="?sort=-time&limit=".concat(t.limit,"&page=").concat(t.currentPage,"&customerId=").concat(r,"&salesPoint[ne]=Reception"),e.prev=2,e.next=5,t.$axios.get("/sales/".concat(n));case 5:return m=e.sent,e.next=8,null==m||null===(o=m.data)||void 0===o?void 0:o.data;case 8:return t.sales=e.sent,e.next=11,null==m||null===(c=m.data)||void 0===c?void 0:c.paid[0];case 11:return t.paid=e.sent,e.next=14,null==m||null===(l=m.data)||void 0===l?void 0:l.post[0];case 14:return t.post=e.sent,e.next=17,null==m||null===(d=m.data)||void 0===d?void 0:d.resultLength;case 17:t.saleLength=e.sent,e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(2),e.abrupt("return",e.t0.response.data.message);case 23:case"end":return e.stop()}}),e,null,[[2,20]])})))()},updateSale:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var form;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:form=e.createSalesForm(t),"Restaurant"!=e.user.staffType&&"Bar"!=e.user.staffType||e.socket.emit("updateSale",form);case 2:case"end":return r.stop()}}),r)})))()},updateTransaction:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:({transaction:!t.transaction,id:t._id,username:e.user.username});case 1:case"end":return r.stop()}}),r)})))()},deleteSale:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("kitchen/DELETE_SALE",t);case 2:200==(n=r.sent).status?e.getUserPurchases():e.callResponseMsg(n.response.data.message,!0,!0);case 4:case"end":return r.stop()}}),r)})))()}},computed:{user:function(){return this.$store.getters.getUserInfo}},mounted:function(){var t=this;this.setDate(),this.getUserPurchases(),this.socket=this.$nuxtSocket({}),this.socket.on("createdOrder",(function(data,e){t.getUserPurchases()})),this.socket.on("updatedSale",(function(data,e){t.getUserPurchases()})),this.socket.on("updatedTransaction",(function(data,e){t.getUserPurchases()}))}}),C=Object(v.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"transaction"},[e("div",{staticClass:"table-line left-align"},[e("div",{staticClass:"table-light"},[t._v("Result: "+t._s(t.saleLength))]),t._v(" "),e("div",{staticClass:"table-light"},[t._v("\n      Page "+t._s(t.currentPage)+" of "+t._s(t.pages().length)+"\n    ")]),t._v(" "),t.post?e("div",{staticClass:"table-light right-float"},[t._v("\n      Posted: "+t._s(t.formatMoney(t.post.amount))+"\n    ")]):t._e(),t._v(" "),t.paid?e("div",{staticClass:"table-light right-float"},[t._v("\n      Paid: "+t._s(t.formatMoney(t.paid.amount))+"\n    ")]):t._e()]),t._v(" "),e("div",{staticClass:"table-flow"},[e("table",[e("thead",[e("tr",[e("td",[t._v("S/N")]),t._v(" "),e("td",[t._v("Description")]),t._v(" "),e("td",[t._v("Customer")]),t._v(" "),e("td",[t._v("Price")]),t._v(" "),e("td",[t._v("Time")]),t._v(" "),e("td",[t._v("Status")]),t._v(" "),e("td",[t._v("Transaction")]),t._v(" "),t._e()])]),t._v(" "),e("tbody",t._l(t.sales,(function(r,i){return e("tr",{key:i},[e("td",[t._v(t._s(i+1))]),t._v(" "),e("td",t._l(r.description,(function(r,i){return e("div",{key:i},[t._v("\n              "+t._s(r)+"\n            ")])})),0),t._v(" "),e("td",[r.checkInCheckOut?e("div",[t._v(t._s(r.customer))]):e("div",[t._v("Room "+t._s(r.customer))])]),t._v(" "),e("td",[t._v(t._s(t.formatMoney(r.price)))]),t._v(" "),e("td",[r.checkInCheckOut?e("div",[t._v("\n              "+t._s(t.formatAMPM(new Date(r.time)))+", "),e("br"),t._v("\n              "+t._s(r.formatedDate)+"\n            ")]):e("div",[t._v(t._s(t.formatAMPM(new Date(r.time))))])]),t._v(" "),e("td",[r.status?e("div",{staticClass:"status",class:{success:r.status},on:{click:function(e){return t.updateSale(r)}}},[t._v("\n              Delivered\n            ")]):e("div",{staticClass:"status",on:{click:function(e){return t.updateSale(r)}}},[t._v("Pending")])]),t._v(" "),e("td",[r.transaction?e("div",{staticClass:"status",class:{success:r.transaction},on:{click:function(e){return t.updateTransaction(r)}}},[t._v("\n              Paid\n            ")]):e("div",{staticClass:"status",on:{click:function(e){return t.updateTransaction(r)}}},[t._v("\n              Posted\n            ")])]),t._v(" "),t._e()])})),0)])]),t._v(" "),e("div",{staticClass:"pagination"},[1!=t.currentPage?e("img",{staticClass:"pagination-arrow left",attrs:{src:"/img/left-nav.svg",loading:"lazy",alt:""},on:{click:function(e){return t.paginate(t.currentPage-1)}}}):t._e(),t._v(" "),e("ul",{staticClass:"page-list",attrs:{role:"list"}},t._l(t.pages(),(function(r,n){return e("li",{key:n,staticClass:"page-items",class:{active:t.currentPage==n+1},staticStyle:{cursor:"pointer"},on:{click:function(e){return t.paginate(n+1)}}},[e("div",[t._v(t._s(n+1))])])})),0),t._v(" "),t.currentPage<t.pages().length?e("img",{staticClass:"pagination-arrow",attrs:{src:"/img/left-nav.svg",loading:"lazy",alt:""},on:{click:function(e){return t.paginate(t.currentPage+1)}}}):t._e()])])}),[],!1,null,null,null).exports,w={data:function(){return{user:"",avatar:"https://uploads-ssl.webflow.com/62dec850062ac34180b54f5c/636789872529d135b72ee5d6_user-alt.svg",profilePicture:"",picture:"",roomHistory:[],currentPage:1,limit:4,sort:"day,-time",sortSign:"-",field:"All Items",roomLength:"",pages:function(){for(var t=[],e=Math.ceil(this.roomLength/this.limit),i=0;i<e;i++)t.push("i");return t},date:""}},methods:{formatDate:function(data){var t=new Date(data);return"".concat(t.getDate(),"/").concat(t.getMonth(),"/").concat(t.getFullYear())},formatAMPM:function(t){var e=t.getHours(),r=t.getMinutes(),n=e>=12?"pm":"am";return(e=(e%=12)||12)+":"+(r=r<10?"0"+r:r)+" "+n},formatMoney:function(t){return 0==t?"N0.00":"N"+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},setProfilePicture:function(t){var e=Object(o.a)(photo.files,1)[0];this.profilePicture=e,this.avatar=URL.createObjectURL(e),this.picture=this.avatar},updateUser:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var form,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return form=new FormData,r=t.user._id,form.append("profilePicture",t.profilePicture),e.next=5,t.$store.dispatch("UPDATE_USER",{id:r,form:form});case 5:e.sent&&t.setUser();case 7:case"end":return e.stop()}}),e)})))()},getUser:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$route.params.id,e.prev=1,e.next=4,t.$axios.get("/users/".concat(r));case 4:n=e.sent,t.user=n.data.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},getRoomHistory:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$route.params.id,n="?userId=".concat(r,"&limit=").concat(t.limit,"&page=").concat(t.currentPage),e.prev=2,e.next=5,t.$axios.get("/rooms/room-history/".concat(n));case 5:o=e.sent,t.roomHistory=o.data.data,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()}},computed:{getUserInfo:function(){return this.$store.getters.getUserInfo},URL:function(){return this.$store.state.API_URL}},mounted:function(){this.getRoomHistory(),this.getUser()},components:{AdminFooter:c.a,AdminNavigation:d.a,AdminHeader:l.a,AdminCards:m.a,UserRoomHistory:h,UserPurchaseHistory:C}},P=(r(572),Object(v.a)(w,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"profile"},[e("AdminHeader"),t._v(" "),e("div",{staticClass:"admin-content"},[e("AdminNavigation"),t._v(" "),e("div",{staticClass:"middle-content"},[e("AdminCards"),t._v(" "),e("div",{staticClass:"panel-holder"},[e("div",{staticClass:"each-panel full"},[e("div",{staticClass:"w-form"},[t.user?e("form",{staticClass:"profile-form",attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.updateUser.apply(null,arguments)}}},[t.user.username!=t.getUserInfo.username?e("div",{staticClass:"profile-img-holder"},[e("div",{staticClass:"user-pix"},[t.user.profilePicture?e("img",{staticClass:"profile-pic",attrs:{src:"".concat(t.URL,"/uploads/").concat(t.user.profilePicture),loading:"lazy",alt:""}}):e("img",{staticClass:"profile-pic",attrs:{src:t.avatar,loading:"lazy",alt:""}})])]):t._e(),t._v(" "),t.user.username!=t.getUserInfo.username?e("div",{staticClass:"profile-input-block"},[e("label",{staticClass:"profile-label",attrs:{for:"username"}},[t._v("Username:")]),e("input",{staticClass:"profile-input w-input",attrs:{type:"text",maxlength:"256",name:"username","data-name":"username",placeholder:t.user.username,id:"username"}})]):t._e(),t._v(" "),t.user.username!=t.getUserInfo.username?e("div",{staticClass:"profile-input-block"},[e("label",{staticClass:"profile-label",attrs:{for:"fullname"}},[t._v("Full Name:")]),e("input",{staticClass:"profile-input w-input",attrs:{type:"text",maxlength:"256",name:"fullname","data-name":"fullname",placeholder:t.user.fullName,id:"fullname"}})]):t._e(),t._v(" "),t.user.username!=t.getUserInfo.username?e("div",{staticClass:"profile-input-block"},[e("label",{staticClass:"profile-label",attrs:{for:"email-4"}},[t._v("Email:")]),e("input",{staticClass:"profile-input w-input",attrs:{type:"email",maxlength:"256",name:"email","data-name":"email",placeholder:t.user.email,id:"email-4"}})]):t._e(),t._v(" "),t.user.username!=t.getUserInfo.username?e("div",{staticClass:"profile-input-block"},[e("label",{staticClass:"profile-label",attrs:{for:"phone"}},[t._v("Phone No.:")]),e("input",{staticClass:"profile-input w-input",attrs:{type:"tel",maxlength:"256",name:"phone","data-name":"phone",placeholder:t.user.phoneNumber,id:"phone"}})]):t._e(),t._v(" "),t.user.username!=t.getUserInfo.username?e("div",{staticClass:"profile-input-block"},[e("label",{staticClass:"profile-label",attrs:{for:"number"}},[t._v("Room No.:")]),e("input",{staticClass:"profile-input w-input",attrs:{type:"number",maxlength:"256",name:"number","data-name":"number",placeholder:null!=t.user.activeRoom?t.user.activeRoom:"",id:"number",disabled:""}})]):t._e(),t._v(" "),t.user.username!=t.getUserInfo.username?e("div",{staticClass:"profile-input-block"},[e("label",{staticClass:"profile-label",attrs:{for:"name-8"}},[t._v("Spent:")]),e("input",{staticClass:"profile-input w-input",attrs:{type:"text",maxlength:"256",name:"name-7","data-name":"Name 7",placeholder:"".concat(t.formatMoney(t.user.expenses)),id:"name-7"}})]):t._e(),t._v(" "),t.user.username!=t.getUserInfo.username?e("div",{staticClass:"profile-input-block"},[e("label",{staticClass:"profile-label",attrs:{for:"date"}},[t._v("Posted Bill")]),e("input",{staticClass:"profile-input w-input",attrs:{type:"text",maxlength:"256",name:"date","data-name":"date",placeholder:"".concat(t.formatMoney(t.user.postBill)),id:"date"}})]):t._e(),t._v(" "),t.user.username!=t.getUserInfo.username?e("div",{staticClass:"profile-input-block"},[e("label",{staticClass:"profile-label",attrs:{for:"date-2"}},[t._v("Balance")]),e("input",{staticClass:"profile-input w-input",attrs:{type:"text",maxlength:"256",name:"date-2","data-name":"Date 2",placeholder:"".concat(t.formatMoney(t.user.expenses-t.user.postBill)),id:"date-2"}})]):t._e()]):t._e(),t._v(" "),e("UserRoomHistory"),t._v(" "),e("UserPurchaseHistory")],1)])])],1)],1),t._v(" "),e("AdminFooter")],1)}),[],!1,null,null,null));e.default=P.exports}}]);